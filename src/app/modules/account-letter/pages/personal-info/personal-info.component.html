<!--<msp-consent-modal #mspConsentModal [application]="accountLetterApplication"
                   [processName]="lang('./en/index.js').consentProcessName"
                   [body]="lang('./en/index.js').consentModalBody"
>
</msp-consent-modal> 
<common-consent-modal #mspConsentModal [isUnderMaintenance]="true"
        [title]="'Information collection notice'"  [processName]="'ACL'"
        [agreeLabel]="lang('./en/index.js').agreeLabel" (accept)="onAccept($event)" (onClose)="addressChangeChkBx.focus()">
        <p><strong>Keep your personal information secure – especially when using a shared device like a computer at a library, school or café.</strong> To delete any information that was entered, either complete the application and submit it or, if you don’t finish, close the web browser.</p><p><strong>Need to take a break and come back later?</strong> The data you enter on this form is saved locally to the computer or device you are using until you close the web browser or submit your application.</p><p><strong>Information in this application is collected by the Ministry of Health</strong> under section 26(a), (c) and (e) of the Freedom of Information and Protection of Privacy Act and will be used to determine eligibility for provincial health care benefits in BC and administer Premium Assistance. Should you have any questions about the collection of this personal information please <a href="http://www2.gov.bc.ca/gov/content/health/health-drug-coverage/msp/bc-residents-contact-us" target="_blank">contact Health Insurance BC <i class="fa fa-external-link" aria-hidden="true"></i></a>.</p> 
</common-consent-modal>

-->
<common-consent-modal #mspConsentModal [isUnderMaintenance]="true"
        [title]="'Information collection notice'" agreeLabel="I have read and understand this information"
        [processName]="lang('./en/index.js').consentProcessName" (accept)="accountLetterApplication.infoCollectionAgreement = $event;  saveApplication($event)">
        <p>Keep your personal information secure - especially when using a shared computer at a library, school or cafe. To remove any information you entered, either complete the application and submit it or, if you don’t finish, close the web browser.</p><p>Need to take a break and come back later? The data you enter on this form is saved on the computer or device you are using until you close the web browser or submit your application. </p><p>Personal information is collected, used, disclosed and provided security in accordance with the British Columbia Freedom of Information and Protection of Privacy Act. If you have any questions about the collection or use of this information, please contact <a href="https://www2.gov.bc.ca/gov/content/health/health-drug-coverage/pharmacare-for-bc-residents/contact-us" target="_blank">Health Insurance BC.<i class="fa fa-external-link" aria-hidden="true"></i></a>.</p>
</common-consent-modal> 




<form #formRef="ngForm" novalidate>

    <div class="col-md-10">
        <h1 [innerHtml]="lang('./en/index.js').pageTitle"></h1>
        <p class="intro"
           [innerHtml]="lang('./en/index.js').servicesCardMsg" role="heading">
        </p>
        
        <h2 [innerHTML]="lang('./en/index.js').applicantInfo"></h2>
        <hr>

        <div class="card panel-default col-md-6">
            <div class="card-body">
              <common-phn #phn name="previous_phn"
                            [label]="lang('./en/index.js').phnlabel"
                            [(ngModel)]="applicant.previous_phn"
                            (ngModelChange)=saveApplication($event)
                            [placeholder]="lang('./en/index.js').phnPlaceHolder"
                            required
                            commonValidatePhn></common-phn>

                <msp-birthdate [isACL]="true"
                        #birthDate
                        id="acl_dob"
                        (onChange)="saveApplication($event);"
                        [showError]="showError"
                        [person]="applicant">
                </msp-birthdate>
                <b>{{postalCode}}</b>
                <common-postal-code name="residental_postal_code" 
                                    [label]="lang('./en/index.js').postalCodeLabel" 
                                    [ngModel]="postalCode" 
                                    (ngModelChange)="saveApplication($event);">
                </common-postal-code>  
                  
              <!--  <label for="residentialAddressPostalCode{{objectId}}"
                    [innerHtml]="lang('./en/index.js').postalCodeLabel"></label>
                <input [(ngModel)]='accountLetterApplication.postalCode' type="text" class="form-control to-upper"
                    id="residentialAddressPostalCode{{objectId}}" name="residentialAddressPostalCode"
                    #residentialAddressPostalCodeRef="ngModel" required tabindex="0" maxlength="8"
                    (onChange)="saveApplication($event);" [pattern]="phnRegex" placeholder="A1A 1A1" [textMask]="{mask: postalCodeMask, pipe: upperCasePipe}">
                <div *ngIf='residentialAddressPostalCodeRef.touched || showError'
                    role="alert" aria-live="assertive">

                         <div class="text-danger" *ngIf="residentialAddressPostalCodeRef.errors?.required"
                              [innerHtml]="lang('./en/index.js').postalCodeErrorIsRequired"></div>
                         <div class="text-danger" *ngIf="residentialAddressPostalCodeRef.errors?.pattern"
                              [innerHtml]="lang('./en/index.js').postalCodeErrorPattern"></div>
                </div> -->
                 
            </div>

        </div>
        <hr>

        <msp-specific-member  [person]="applicant" #specificMember (onStatusChange)="setStatus($event);" (onChange)="saveApplication($event);"> </msp-specific-member>

        <br/>


        <div *ngIf="applicant.enrollmentMember != undefined" class="row">
            <div class="col-lg-12">
                    <common-captcha [apiBaseUrl]="captchaApiBaseUrl" [nonce]="accountLetterApplication.uuid"
                    (onValidToken)="saveToken($event)"></common-captcha>
            </div>
        </div>

    </div>

    <div class="row" *ngIf="form.submitted && !accountLetterApplication.hasValidAuthToken">
        <div class="col-lg-6">
            <div class="text-danger"
                 [innerHtml]="lang('./en/index.js').tryAgainWithCaptcha">
            </div>
        </div>
    </div>

    <hr>
    <!-- Highlighted field Error message -->
    <div class="col-lg-6" *ngIf="formRef.submitted">
        <p class="text-danger" [innerHTML]="lang('./en/index.js').completesAllHighlightedFields">
        </p>
    </div>
   
    <div class="col-lg-12"> 
      <!--  <common-radio [label]="'Test Radio'" (onStatusChange)="checkRadio($event)"></common-radio>
-->
    <common-form-action-bar [submitLabel]="lang('./en/index.js').buttonLabel"
            [canContinue]="canContinue()"
            (btnClick)="handleFormSubmission($event)">
    </common-form-action-bar>
            

    <!--<fpcare-form-action-bar [submitLabel]="lang('./en/index.js').buttonLabel"
                            [canContinue]="canContinue()"
                            (btnClick)="handleFormSubmission($event)">
    </fpcare-form-action-bar>-->
    </div>

</form>
