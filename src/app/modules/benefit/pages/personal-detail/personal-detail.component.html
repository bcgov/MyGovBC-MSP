<form #formRef="ngForm" novalidate>
  <div class="row">
    <!-- Remove Spouse Button, it's a Red Cross to delete spouse -->
    <!-- TODO - Remove below if not needed. Looks like it's just a copy-pate leftover?  -->
    <!-- <div class="col-lg-12" *ngIf="!embedded">
        <div *ngIf="person.relationship !== 0" style="margin-top: 18px">
            <div *ngIf="person.relationship === 1">
            <i class="fa fa-times mr-3 mb-3 pointer float-right text-danger" aria-hidden="true" (click)="removeSpouse()"></i>
            </div>
        </div>
    </div> -->

    <!-- Full  Name -->
    <div class="col-md-6"  style="margin-left: 15px">
        <msp-full-name [data]="person" (dataChange)="onChange.emit($event);"></msp-full-name>
    </div>
  </div>

  <!-- Birthdate, Component birthdate is calling common date from library -->
  <div class="row">
    <div class="col-lg-4">
      <msp-birthdate #birthdate
                    [person]="person"
                    (onChange)="onChange.emit($event)">
      </msp-birthdate>
    </div>
  </div>

  <!-- PHN -->
  <div class="row">
      <div class="col-md-4">
          <div class="form-group">
            <common-phn
                    #phnRef="ngModel"
                    name="phn"
                    [(ngModel)]="person.previous_phn"
                    required
                    commonValidatePhn></common-phn>
            <div class="text-danger" *ngIf="!isPhnUnique()"
              [innerHTML]="lang('./en/index.js').phnUniqueError">
            </div>
           
              
          </div>
      </div>
  </div>

  <!-- SIN -->
  <div class="row">
    <div class="col-md-4">
        <div class="form-group"
            [ngClass]="{'has-error': !formRef.controls.sin?.valid && sinRef.touched}">
          <label class="control-label" for="sin"
                [innerHTML]="lang('./en/index.js').sinLabel"></label>
          <input type="text"
                [(ngModel)]="person.sin"
                required
                pattern="[1-9]{1}\d{2}\s?\d{3}\s?\d{3}"
                id='sin' name='sin'
                #sinRef="ngModel"
                class="form-control"
                placeholder="046 454 286">
          <div *ngIf='sinRef.touched'>
            <div class="text-danger" *ngIf="sinRef.errors?.required"
                [innerHTML]="lang('./en/index.js').sinErrorRequired"></div>
            <div class="text-danger" *ngIf="sinRef.errors?.pattern"
                [innerHTML]="lang('./en/index.js').sinErrorPattern"></div>
            <div class="text-danger" *ngIf="!sinRef.errors?.pattern && sinRef.errors?.sinCheck"
                [innerHTML]="lang('./en/index.js').sinCheckErrorPattern"></div>
          </div>
          <div class="text-danger" *ngIf="!isSinUnique()"
              [innerHTML]="lang('./en/index.js').sinUniqueError">
          </div>
        </div>
    </div>
  </div>

  <!-- File Uploader -->
  <h2>Documents</h2>
  <p class="help-block"> Upload your Notice of Assessment or Reassessment from Canada Revenue Agency for {{benefitApp.taxYear}}</p>
  <div class="row" style="margin-left: 5px">
       <common-file-uploader 
                          [images]="person.assistYearDocs"
                          (imagesChange)="addDocument($event)"
                          [id]='benefitApp.id'
                          (errorDocument)="errorDoc($event)" instructionText="Please upload Notice of Assessment documents for {{benefitApp.taxYear}}">
        </common-file-uploader>
        <msp-image-error-modal #mspImageErrorModal></msp-image-error-modal>
   </div>
</form>